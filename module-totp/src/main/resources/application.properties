quarkus.datasource.devservices.enabled=true
quarkus.datasource.db-kind=postgresql
quarkus.datasource.devservices.db-name=coauth
quarkus.datasource.devservices.username=${POSTGRESQL_USER}
quarkus.datasource.devservices.password=${POSTGRESQL_PASSWORD}
#quarkus.datasource.devservices.init-script-path=init.sql
quarkus.datasource.devservices.port=5083
%dev.quarkus.datasource.reactive.shared=true
quarkus.datasource.reactive.name=coauth
# %dev.quarkus.datasource.reactive.url=vertx-reactive:postgresql://${database.host}:${database.port}/COAUTH
quarkus.datasource.reactive.max-size=30
# %dev.quarkus.datasource.reactive.mysql.ssl-mode=verify-identity
# %dev.quarkus.datasource.reactive.trust-all= true
# %dev.quarkus.datasource.reactive.trust-certificate-pem= true
# %dev.quarkus.datasource.reactive.hostname-verification-algorithm= https
%dev.quarkus.hibernate-orm.database.generation=drop-and-create
%dev.quarkus.hibernate-orm.sql-load-script=init.sql

#%prod.quarkus.hibernate-orm.database.generation=drop-and-create
#%prod.quarkus.hibernate-orm.sql-load-script=init.sql
%prod.quarkus.datasource.db-kind=postgresql
%prod.quarkus.datasource.reactive.url=vertx-reactive:postgresql://postgresql/coauth
%prod.quarkus.datasource.username=${POSTGRESQL_USER}
%prod.quarkus.datasource.password=${POSTGRESQL_PASSWORD}

quarkus.infinispan-client.devservices.enabled=true
quarkus.hibernate-orm.log.sql=true

# Infinispan configuration
%dev.quarkus.infinispan-client.username=${INFINISPAN_USER}
%dev.quarkus.infinispan-client.password=${INFINISPAN_PASSWORD}
%dev.quarkus.infinispan-client.devservices.port=11222
quarkus.infinispan-client.devservices.shared=true
######################
%prod.quarkus.infinispan-client.hosts=infinispan-db:11222
%prod.quarkus.infinispan-client.username=${INFINISPAN_USER}
%prod.quarkus.infinispan-client.password=${INFINISPAN_PASSWORD}


# TOTP Module configuration
%dev.totp.allowed-discrepancy=2
%dev.totp.time-period=30
%dev.totp.digit-length=6
%dev.totp.attempt-expiry-time-minutes=15

%prod.totp.allowed-discrepancy=2
%prod.totp.time-period=30
%prod.totp.digit-length=6
%prod.totp.attempt-expiry-time-minutes=15

#quarkus.datasource.db-kind=mysql
#quarkus.datasource.devservices.volumes."/local/test/data"=/var/lib/mysql
#quarkus.datasource.devservices.username=quarkus
#quarkus.datasource.devservices.password=quarkus
#quarkus.datasource.devservices.port=3306
#quarkus.datasource.devservices.db-name=COAUTH
#quarkus.datasource.devservices.init-script-path=init.sql
#quarkus.datasource.devservices.reactive.url=vertx-reactive:mysql://localhost:3306/COAUTH
#quarkus.datasource.reactive.url=vertx-reactive:mysql://localhost:3306/COAUTH

#quarkus.package.type=uber-jar
%dev.quarkus.http.port=8083

# Configuration for Dev mode Kafka
quarkus.kafka.devservices.shared=true
quarkus.kafka.devservices.enabled=true

# Configuration for Kafka
mp.messaging.outgoing.totp-verify-status.connector=smallrye-kafka
mp.messaging.outgoing.totp-verify-status.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer
mp.messaging.incoming.totp-verify-generate.connector=smallrye-kafka
mp.messaging.incoming.totp-verify-generate.value.deserializer=dev.coauth.module.messaging.MessageVerificationGenerateDtoDeserializer
mp.messaging.outgoing.totp-register-status.connector=smallrye-kafka
mp.messaging.outgoing.totp-register-status.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer
mp.messaging.incoming.totp-register-generate.connector=smallrye-kafka
mp.messaging.incoming.totp-register-generate.value.deserializer=dev.coauth.module.messaging.MessageRegisterGenerateDtoDeserializer


# Updates for Ready Managed Kafka (Example: Upstash Kafka)
%prod.kafka.bootstrap.servers=${KAFKA_BOOTSTRAP_SERVERS:kafka:9092}
%prod.mp.messaging.connector.smallrye-kafka.security.protocol=${KAFKA_SECURITY_PROTOCOL}
%prod.mp.messaging.connector.smallrye-kafka.sasl.mechanism=${KAFKA_SASL_MECHANISM}
%prod.kafka.sasl.jaas.config=${KAFKA_JAAS_CONFIG}